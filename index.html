<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tal‚Ä¶ üíò</title>

  <!-- Fonts: clean modern + optional script accent -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --rose-700:#be123c;
      --rose-600:#e11d48;
      --rose-400:#fb7185;

      --ink:#111827;
      --muted:#6b7280;

      --card-bg: rgba(255,255,255,0.80);
      --card-border: rgba(255,255,255,0.55);
      --shadow: 0 18px 55px rgba(0,0,0,0.25);

      --yes-grad: linear-gradient(135deg, var(--rose-700), var(--rose-400));
      --no-bg: rgba(255,255,255,0.90);
      --no-border: rgba(17,24,39,0.12);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family:"Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      display:flex;
      align-items:center;
      justify-content:center;

      background-image: url("valentaine1Bk.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;

      overflow:hidden;
    }

    /* subtle overlay to keep text readable on busy parts of background */
    .veil{
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 50% 30%, rgba(255,255,255,0.38), rgba(255,255,255,0.06) 55%, rgba(0,0,0,0.18) 100%),
        linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.18));
      pointer-events:none;
      z-index: 0;
    }

    .wrap{
      position: relative;
      width: min(720px, 92vw);
      padding: 26px 18px;
      z-index: 2;
    }

    .card{
      position: relative;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 22px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 26px 22px 22px;
      text-align: center;
    }

    .topline{
      font-size: 14px;
      color: var(--muted);
      letter-spacing: 0.02em;
      margin-bottom: 10px;
    }

    h1{
      margin: 0 0 8px;
      font-size: clamp(28px, 4vw, 44px);
      line-height: 1.12;
      font-weight: 700;
    }

    .script{
      font-family: "Dancing Script", cursive;
      font-weight: 600;
      color: var(--rose-600);
      font-size: 1.08em;
    }

    .sub{
      margin: 0 0 18px;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.4;
    }

    .gif{
      width: min(360px, 82vw);
      height: auto;
      border-radius: 18px;
      box-shadow: 0 14px 35px rgba(0,0,0,0.18);
      margin: 10px auto 18px;
      display:block;
      user-select:none;
      -webkit-user-drag:none;
    }

    .arena{
      position: relative;
      height: 150px;
      width: 100%;
      margin-top: 12px;
    }

    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      font-weight:700;
      border-radius:999px;
      padding:14px 20px;
      font-size:16px;
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease, opacity .12s ease;
      user-select:none;
    }
    .btn:active{ transform: scale(0.98); }

    .yes{
      background: var(--yes-grad);
      color:#fff;
      box-shadow: 0 14px 30px rgba(225,29,72,0.30);
      min-width: 150px;
    }
    .yes:hover{ filter: brightness(1.03); transform: translateY(-1px); }

    .no{
      background: var(--no-bg);
      color: var(--ink);
      border: 1px solid var(--no-border);
      box-shadow: 0 10px 24px rgba(17,24,39,0.10);
      min-width: 120px;
    }

    .yesWrap, .noWrap{
      position:absolute;
      top: 52px;
      left: 50%;
      transform: translateX(-50%);
    }
    .yesWrap{ left: 42%; }
    .noWrap{ left: 62%; }

    .msg{
      margin-top: 8px;
      min-height: 22px;
      font-size: 14px;
      color: var(--muted);
    }

    .disabled{
      opacity: 0.7;
      cursor: not-allowed !important;
      transform:none !important;
      filter:none !important;
    }

    /* falling hearts */
    .heart{
      position: fixed;
      font-size: 18px;
      transform: translateY(-20px);
      opacity: 0.95;
      animation: fall linear forwards;
      pointer-events:none;
      z-index: 20;
      text-shadow: 0 8px 20px rgba(0,0,0,0.2);
      will-change: transform, opacity;
    }
    @keyframes fall{
      to { transform: translateY(110vh) rotate(360deg); opacity: 0.0; }
    }
  </style>
</head>

<body>
  <div class="veil"></div>

  <div class="wrap">
    <div class="card" id="card">
      <div class="topline">A quick question‚Ä¶</div>

      <h1><span class="script">Tal</span>‚Ä¶ will you be my Valentine? üíò</h1>

      <p class="sub" id="subText">Be honest‚Ä¶ but also‚Ä¶ be kind üòÖ</p>

      <!-- GIF -->
      <img id="gif" class="gif" alt="gif" />

      <!-- Buttons -->
      <div class="arena" id="arena">
        <div class="yesWrap" id="yesWrap">
          <button class="btn yes" id="yesBtn">Yes ‚ù§Ô∏è</button>
        </div>

        <div class="noWrap" id="noWrap">
          <button class="btn no" id="noBtn">No üòÖ</button>
        </div>
      </div>

      <div class="msg" id="msg"></div>

      <!-- SOUND (put a file named "yes.mp3" in the same folder) -->
      <audio id="yesAudio" preload="auto" src="yes.mp3"></audio>
    </div>
  </div>

  <script>
    /*********************************************************
     * FILES YOU NEED IN THE SAME FOLDER AS THIS index.html:
     * - valentaine1Bk.jpg
     * - pleading.gif
     * - celebrate1.gif
     * - celebrate2.gif  (your ~10s looping memories gif)
     * - yes.mp3         (optional sound)
     *********************************************************/

    const PLEADING_GIF = "pleading.gif";
    const CELEBRATE_1  = "celebrate1.gif";
    const CELEBRATE_2  = "celebrate2.gif"; // loops naturally
    const BURST_MS     = 1800;             // celebration burst duration

    const gifEl    = document.getElementById("gif");
    const arena    = document.getElementById("arena");
    const noWrap   = document.getElementById("noWrap");
    const yesWrap  = document.getElementById("yesWrap");
    const msg      = document.getElementById("msg");
    const subText  = document.getElementById("subText");

    const yesBtn   = document.getElementById("yesBtn");
    let   noBtn    = document.getElementById("noBtn");
    const yesAudio = document.getElementById("yesAudio");

    // initial GIF
    gifEl.src = PLEADING_GIF;

    /*********************************************************
     * NO button: dramatically unclickable
     *********************************************************/
    let escapes = 0;

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
    function rect(el){ return el.getBoundingClientRect(); }

    function moveNoButton(){
      const arenaRect = rect(arena);
      const noRect  = rect(noWrap);
      const yesRect = rect(yesWrap);

      const pad = 10;
      let x, y, tries = 0;

      do {
        const maxX = arenaRect.width - noRect.width - pad;
        const maxY = arenaRect.height - noRect.height - pad;

        x = pad + Math.random() * clamp(maxX, pad, maxX);
        y = pad + Math.random() * clamp(maxY, pad, maxY);

        tries++;

        // Keep NO away from YES
        const candidate = {
          left: arenaRect.left + x,
          top: arenaRect.top + y,
          right: arenaRect.left + x + noRect.width,
          bottom: arenaRect.top + y + noRect.height
        };

        const tooClose =
          !(candidate.right  < yesRect.left - 18 ||
            candidate.left   > yesRect.right + 18 ||
            candidate.bottom < yesRect.top - 18 ||
            candidate.top    > yesRect.bottom + 18);

        if (!tooClose) break;
      } while (tries < 12);

      noWrap.style.left = x + "px";
      noWrap.style.top  = y + "px";
      noWrap.style.transform = "none";

      escapes++;
      if (escapes === 1) msg.textContent = "Nice try üòå";
      else if (escapes === 2) msg.textContent = "Nope. Not today.";
      else if (escapes === 3) msg.textContent = "That button is allergic to rejection üò≠";
      else msg.textContent = "You already know what to press üòè";
    }

    function escapeNo(e){
      e.preventDefault();
      e.stopPropagation();

      // teleport feel: quick fade then move
      noWrap.style.transition = "opacity 90ms ease";
      noWrap.style.opacity = "0";
      setTimeout(() => {
        moveNoButton();
        noWrap.style.opacity = "1";
      }, 90);
    }

    function attachNoEscapeHandlers(){
      ["mouseenter","mouseover","pointerenter","touchstart","mousedown","click"].forEach(evt => {
        noBtn.addEventListener(evt, escapeNo, { passive: false });
      });
    }

    // Initialize absolute layout inside arena
    function initPositions(){
      noWrap.style.position = "absolute";
      yesWrap.style.position = "absolute";

      yesWrap.style.left = "38%";
      yesWrap.style.top  = "52px";
      yesWrap.style.transform = "translateX(-50%)";

      noWrap.style.left = "62%";
      noWrap.style.top  = "52px";
      noWrap.style.transform = "translateX(-50%)";
    }

    initPositions();
    attachNoEscapeHandlers();

    /*********************************************************
     * Hearts (continuous "rain" after YES)
     *********************************************************/
    function spawnHearts(count = 6){
      const hearts = ["üíñ","üíò","‚ù§Ô∏è","üíó","üíï"];
      for (let i = 0; i < count; i++){
        const el = document.createElement("div");
        el.className = "heart";
        el.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        el.style.left = Math.floor(Math.random() * 100) + "vw";
        el.style.top = "-20px";

        const dur = 4000 + Math.random() * 3000; // slower, romantic fall
        el.style.animationDuration = dur + "ms";
        el.style.fontSize = (14 + Math.random() * 18) + "px";

        document.body.appendChild(el);
        setTimeout(() => el.remove(), dur + 200);
      }
    }

    let heartInterval = null;

    function startHeartRain(){
      if (heartInterval) return; // prevent duplicates
      spawnHearts(12); // initial burst
      heartInterval = setInterval(() => {
        spawnHearts(4); // gentle ongoing rain
      }, 1200); // every 1.2 seconds
    }

    /*********************************************************
     * Lock buttons after YES
     *********************************************************/
    function lockButtons(){
      yesBtn.classList.add("disabled");
      yesBtn.disabled = true;

      // Disable NO and stop movement by replacing it with a clone (no listeners)
      const newNoBtn = noBtn.cloneNode(true);
      newNoBtn.classList.add("disabled");
      newNoBtn.disabled = true;
      noBtn.parentNode.replaceChild(newNoBtn, noBtn);
      noBtn = newNoBtn;
    }

    /*********************************************************
     * Celebration sequence + Sound
     *********************************************************/
    function playYesSound(){
      // Triggered by click, so browsers usually allow it.
      try{
        yesAudio.currentTime = 0;
        const p = yesAudio.play();
        if (p && typeof p.catch === "function") p.catch(() => {});
      }catch(e){}
    }

    function playCelebrationSequence(){
      // 1) Quick burst
      gifEl.src = CELEBRATE_1;

      // 2) Switch to your looping memories gif and stay there
      setTimeout(() => {
        gifEl.src = CELEBRATE_2;
      }, BURST_MS);
    }

    yesBtn.addEventListener("click", () => {
      msg.textContent = "";
      subText.textContent = "Yesss. Okay‚Ä¶ I‚Äôm officially smiling hard right now ü•∞";

      playYesSound();
      playCelebrationSequence();
      startHeartRain();
      lockButtons();
    });
  </script>
</body>
</html>
